<img src="./pics/icon.png" align="right" />

# HowToUseVim🏄

传统观点认为，Vim的学习曲线很陡。

凡是可以简化重复性操作的方式,都会成倍地节省我们的时间。

. 命令可以让我们重复上次的修改,它是Vim中最为强大的多面手。要理解 . 命令的强大,我们需要意识到这一点:“上次修改”可以指
很多东西,一次修改的单位可以是字符、整行,甚至是整个文件。. 命令是一个微型的宏。

$ 命令可以完成移动动作，把光标移到行尾。

s 命令把两个操作合并为一个:它先删除光标下的字符,然后进入插入模式。

f{char} 命令让Vim查找下一处指定字符出现的位置,如果找到了,就直接把光标移到那里。; 命令会重复查找上次 f 命令所查找的字符

u 键撤销上次的修改

/content，调出查找提示符,并输入完整的单词来查找“content”。执行过一次查找“content”的命令后,现在只需按 n 键就可以跳到下
一个匹配项。

cw 命令会删除从光标位置到单词结尾间的字符,并进入插入模式

当处于插入模式时,如果光标位于行尾的话,另起一行最快的方式是按 <CR>。不过有时我更喜欢按 <Esc>o,这是因为我有预感,也许在撤销时我想拥有更细的粒度。

在插入模式中移动光标会重置修改状态当我提到撤销命令会回退从进入插入模式到退出此模式期间输入(或删除)的全部字符时,我略过了一个小细节。如果在插入模式中使用了 <Up>、<Down>、<Left>或 <Right> 这些光标键,将会产生一个新的撤销块。你可以把这想象为先切换回普通模式,然后用 h 、j 、k 或 l 命令对光标进行了移动,唯一区别是我们并没有退出插入模式。这也会对 . 命令的操作产生影响。

操作符 + 动作命令 = 操作

| 命令 | 用途 |
| --- | --- |
| c | 修改 |
| d | 删除 |
| y | 复制到寄存器 |
| g~ | 反转大小写 |
| gu | 转换为小写 |
| gU | 转换为大写 |
| > | 增加缩进 |
| < | 减小缩进 |
| = | 自动缩进 |
| ! | 使用外部程序过滤{motion}所跨越的行 |

重新映射大小写转换键。大小写转换键是一个威胁。如果大小写转换键处于大写模式,而你尝试用k或j去移动光标,那么你触发的将会是K和J命令。

Vim 的文本对象分为两类:一类是操作分隔符的文本对象,如i" 和it;另一类用于操作文本块,如单词、句子和段落。
| 文本对象 | 选择范围         |
| -------- | -------------- |
| iw       | 当前单词         |
| aw       | 当前单词及一个空格 |
| iW       | 当前字串         |
| aW       | 当前字串及一个空格 |
| is       | 当前句子         |
| as       | 当前句子及一个空格 |
| ip       | 当前段落         |
| ap       | 当前段落及一个空行 |

全局位置标记是一种书签,让我们可以在文件间跳转。全局标记在我们分析完代码,并想快速跳回一个文件时特别有用。

m{letter} 命令允许在当前光标位置创建一个位置标记

小写字母会创建局部于缓冲区的标记,大写字母则创建全局标记。

先打开你的vimrc 文件,按 mV 设置一个全局标记(助记词V 代表 vimrc),然后切换到另一个文件中按 'V。现在,你应该马上就跳回到 vimrc的全局标记处了。

Vim的寄存器是一组用于保存文本的简单容器。它们既可像剪贴板那样,剪切、复制和粘贴文本,也可以记录一系列按键操作,把它们录制成宏。

x 命令把光标下的字符剪切下来,把它放到无名寄存器。

p 命令是将内容粘贴至光标之后的

xp,可被用于“调换光标之后的两个字符”。

dd 命令剪切当前行,从而将其内容存入无名寄存器中。

ddp,可被用于“调换当前行和它的下一行”。

ddp 与 yyp 这两组按键操作的相似之处。前者是对文本行的剪切与粘贴操作,实际上是调换了两行的顺序。后者是针对行的复制与粘贴操作,即创建一行副本。

剪切(cut)、复制(copy)与粘贴(paste) —— delete、yank与put

无论哪一种情况,都可以通过加 "{register} 前缀来指定另外一个寄存器,但无名寄存器总是缺省的。事实上,无名寄存器的内容很容易被覆盖,不小心会导致问题发生。

复制专用寄存器("0)

有名寄存器("a – "z)

黑洞寄存器是个有去无回的地方,可用下画线引用它。如果运行 "_d{motion} 命令,Vim将删除该文本且不保存任何副本。只想删除文本却不想覆盖无名寄存器中的内容时,此命令很管用。

系统剪贴板("+)与选择专用寄存器("*)

表达式寄存器("=)

其他寄存器：可以显式地使用删除与复制命令来设置有名、无名以及复制专用寄存器的内容。

| 寄存器 | 内容                   |
| ------ | ---------------------- |
| "%"    | 当前文件名             |
| "#"    | 轮换文件名             |
| ".     | 上次插入的文本         |
| ":     | 上次执行的Ex命令       |
| "/     | 上次查找的模式         |

m{char} 命令负责设置标记,而 `{char} 命令将跳转到该标记。

宏把任意数目的按键操作录制到寄存器,用于之后的回放。在录制命令序列的过程中难免会出错,不过用不着推翻重来,因为可以很方便地在原有宏的结尾附加新的命令。如果要对宏进行较大的修改,甚至可以先将宏粘贴到一个文档里,对该命令序列进行编辑,然后再将其复制回寄存器。

把命令序列录制成宏：

q 键既是“录制”按钮,也是“停止”按钮。为了录制我们的按键操作,一开始需要按 q{register},从而指定一个用于保存宏的寄存器。当状态栏中出现“记录中”时,表示录制已经开始。此后,我们执行的每一条命令都将被宏捕获,直到再次按下q 键停下为止。

可以通过以下命令查看寄存器a中的内容——:reg a

 @{register} 命令执行指定寄存器的内容

 用 @@ 来重复最近调用过的宏

黄金法则:在录制一个宏时,要确保每条命令都可被重复执行。

一旦开始录制宏,首先要问自己几个问题,我在哪里?我从哪里来?我要去哪里?在你做任何事之前,要确保你的光标位置已经就位,只有这样,下一条命令才会做你想做的事情,去你想去的地方。




在Vim里,有三种主要的模式:

1. 正常模式(Normal Mode):用于对文本进行移动、查找替换等操作。

2. 插入模式(Insert Mode):用于输入和修改文本。

3. 可视模式(Visual Mode):用于选择和操作文本片段。

    具有3种不同的可视模式,分别用于操作字符文本、行文本和块文本。

    | 命令   | 描述                           |
    | ------ | ------------------------------ |
    | v     | 激活面向字符的可视模式                      |
    | V    | 激活面向行的可视模式                  |
    | <C - v>    | 激活面向列块的可视模式                         |
    | gv | 重选上次的高亮选区                |

gv 命令都能够正确地工作。不过如果上次的选区被删除了,它也许会工作得不太正常。


没有特别说明，则是在正常模式(Normal Mode)下的命令！

就像其他任一文本编辑器一样,Vim允许读取、编辑文件,并保存修改。在工作过程中,我们通常会说“我们正在编辑一个文件”,但真实情况并不是这样,我们编辑的只是文件在内存中的映像,也就是Vim术语中的“缓冲区”。

文件是存储在磁盘上的,而缓冲区存在于内存中。当Vim打开一个文件时,该文件的内容被读入一个具有相同名字的缓冲区。刚开始,缓冲区的内容和文件的内容完全相同,但当对缓冲区做出修改时,二者的内容就会出现差别。如果决定保留这些修改,就可以再把缓冲区的内容写回到文件里。

| 命令 | 功能 |
| --- | --- |
| j | 向下移动一个实际行 |
| gj | 向下移动一个屏幕行 |
| k | 向上移动一个实际行 |
| gk | 向上移动一个屏幕行 |
| 0 | 移动到实际行的行首 |
| g0 | 移动到屏幕行的行首 |
| ^ | 移动到实际行的第一个非空白字符 |
| g^ | 移动到屏幕行的第一个非空白字符 |
| $ | 移动到实际行的行尾 |
| g$ | 移动到屏幕行的行尾 |

| 命令 | 功能 |
| --- | --- |
| w | 正向移动到下一单词的开头 |
| b | 反向移动到当前单词/上一单词的开头 |
| e | 正向移动到当前单词/下一单词的结尾 |
| ge | 反向移动到上一单词的结尾 |

| 命令 | 用途 |
| --- | --- |
| f{char} | 正向移动到下一个 {char} 所在之处 |
| F{char} | 反向移动到上一个 {char} 所在之处 |
| t{char} | 正向移动到下一个 {char} 所在之处的前一个字符上 |
| T{char} | 反向移动到上一个 {char} 所在之处的后一个字符上 |
| ; | 重复上次的字符查找命令 |
| , | 反转方向查找上次的字符查找命令 |

## 1. Exiting 退出

| 命令   | 描述                           |
| ------ | ------------------------------ |
| :q     | 关闭文件                       |
| :qa    | 关闭所有文件                   |
| :w     | 保存                           |
| :wq/:x | 保存并关闭文件                 |
| ZZ     | 保存并退出                     |
| ZQ     | 不保存并退出                   |

## 2. Exiting insert mode 离开插入模式

| 命令       | 描述                                 |
| ---------- | ------------------------------------ |
| Esc / <C - [ >| 退出插入模式                         |
| <C - C>      | 退出插入模式，并取消当前命令           |

## 3. Editing 编辑

| 命令    | 描述                          |
| ------- | ----------------------------- |
| a       | 追加                          |
| A       | 从行尾追加                    |
| i       | 插入                          |
| o       | 下一行                        |
| O       | 上一行                        |
| s       | 删除字符并插入                |
| S       | 删除行并插入                  |
| C       | 删除至行尾并插入              |
| r       | 替换一个字符                  |
| R       | 进入替换模式                  |
| u       | 撤销更改                      |
| <C - R>   | 重做更改                      |

## 4. Visual mode 可视模式

| 命令 | 描述 |
|---|---|
| v | 进入可视模式 |
| V | 进入可视行模式 |
| <C - V> | 进入可视块模式 |
| d | 删除选定内容 |
| / | 替换选定内容 |
| x | 剪切选定内容 |

## 参考资料 🔐

[Vim cheatsheet](https://devhints.io/vim)

[Vim Cheat Sheet](https://vim.rtorr.com/)

[vim命令使用总结](https://www.bilibili.com/read/cv22398023/)